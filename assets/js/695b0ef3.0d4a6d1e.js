(self.webpackChunkfresher_course=self.webpackChunkfresher_course||[]).push([[713],{3905:function(e,n,t){"use strict";t.d(n,{Zo:function(){return h},kt:function(){return g}});var c=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,c)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function u(e,n){if(null==e)return{};var t,c,i=function(e,n){if(null==e)return{};var t,c,i={},r=Object.keys(e);for(c=0;c<r.length;c++)t=r[c],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)t=r[c],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var a=c.createContext({}),s=function(e){var n=c.useContext(a),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},h=function(e){var n=s(e.components);return c.createElement(a.Provider,{value:n},e.children)},l={inlineCode:"code",wrapper:function(e){var n=e.children;return c.createElement(c.Fragment,{},n)}},p=c.forwardRef((function(e,n){var t=e.components,i=e.mdxType,r=e.originalType,a=e.parentName,h=u(e,["components","mdxType","originalType","parentName"]),p=s(t),g=i,m=p["".concat(a,".").concat(g)]||p[g]||l[g]||r;return t?c.createElement(m,o(o({ref:n},h),{},{components:t})):c.createElement(m,o({ref:n},h))}));function g(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=t.length,o=new Array(r);o[0]=p;var u={};for(var a in n)hasOwnProperty.call(n,a)&&(u[a]=n[a]);u.originalType=e,u.mdxType="string"==typeof e?e:i,o[1]=u;for(var s=2;s<r;s++)o[s]=t[s];return c.createElement.apply(null,o)}return c.createElement.apply(null,t)}p.displayName="MDXCreateElement"},3597:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return u},contentTitle:function(){return a},metadata:function(){return s},toc:function(){return h},default:function(){return p}});var c=t(2122),i=t(9756),r=(t(7294),t(3905)),o=["components"],u={sidebar_position:4},a="Concepts v\xe0 t\xe0i li\u1ec7u",s={unversionedId:"microservices/concepts-resources",id:"microservices/concepts-resources",isDocsHomePage:!1,title:"Concepts v\xe0 t\xe0i li\u1ec7u",description:"C\xe1c concept n\xe0y c\xf2n c\u1ea7n nghi\xean c\u1ee9u th\xeam v\xe0 b\u1ed5 sung sau n\xe0y. C\xf2n v\u1ec1 concept ch\xednh, sau khi m\u1ecdi ng\u01b0\u1eddi setup \u0111\u01b0\u1ee3c Kong Gateway, nh\u1eefng concept c\u01a1 b\u1ea3n nh\u01b0 proxy, gateway, authentication \u0111\u1ec1u \u0111\xe3 c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c n\u1eafm v\u1eefng.",source:"@site/docs/microservices/concepts-resources.md",sourceDirName:"microservices",slug:"/microservices/concepts-resources",permalink:"/topcv-course/docs/microservices/concepts-resources",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/microservices/concepts-resources.md",version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"C\xe0i \u0111\u1eb7t m\xf4i tr\u01b0\u1eddng",permalink:"/topcv-course/docs/microservices/installation"}},h=[{value:"Authorization",id:"authorization",children:[]},{value:"Implement Authorization",id:"implement-authorization",children:[]},{value:"Kong customize plugins",id:"kong-customize-plugins",children:[]},{value:"C\xe1ch t\u01b0\u01a1ng t\xe1c gi\u1eefa c\xe1c service",id:"c\xe1ch-t\u01b0\u01a1ng-t\xe1c-gi\u1eefa-c\xe1c-service",children:[]}],l={toc:h};function p(e){var n=e.components,t=(0,i.Z)(e,o);return(0,r.kt)("wrapper",(0,c.Z)({},l,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"concepts-v\xe0-t\xe0i-li\u1ec7u"},"Concepts v\xe0 t\xe0i li\u1ec7u"),(0,r.kt)("p",null,"C\xe1c concept n\xe0y c\xf2n c\u1ea7n nghi\xean c\u1ee9u th\xeam v\xe0 b\u1ed5 sung sau n\xe0y. C\xf2n v\u1ec1 concept ch\xednh, sau khi m\u1ecdi ng\u01b0\u1eddi setup \u0111\u01b0\u1ee3c Kong Gateway, nh\u1eefng concept c\u01a1 b\u1ea3n nh\u01b0 proxy, gateway, authentication \u0111\u1ec1u \u0111\xe3 c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c n\u1eafm v\u1eefng."),(0,r.kt)("h2",{id:"authorization"},"Authorization"),(0,r.kt)("p",null,"Authorization l\xe0 m\u1ed9t task ph\u1ee9c t\u1ea1p, v\xe0 c\xf3 nhi\u1ec1u c\xe1ch \u0111\u1ec3 implement, Keycloak c\u0169ng h\u1ed7 tr\u1ee3 h\u1ea7u h\u1ebft c\xe1c concept authorization ph\u1ed5 bi\u1ebfn hi\u1ec7n nay. Tuy nhi\xean, \u0111\u1ec3 hi\u1ec3u th\u1ea5u \u0111\xe1o v\xe0 \xe1p d\u1ee5ng \u0111\u01b0\u1ee3c n\xf3 m\u1ed9t c\xe1ch linh ho\u1ea1t th\xec c\xf2n c\u1ea7n r\u1ea5t nhi\u1ec1u th\u1eddi gian."),(0,r.kt)("p",null,"T\xe0i li\u1ec7u ch\xednh: ",(0,r.kt)("a",{parentName:"p",href:"https://www.keycloak.org/docs/latest/authorization_services/"},"https://www.keycloak.org/docs/latest/authorization_services/")),(0,r.kt)("h2",{id:"implement-authorization"},"Implement Authorization"),(0,r.kt)("p",null,"Keycloak ch\u1ec9 ch\u1ecbu tr\xe1ch nhi\u1ec7m define v\xe0 cung c\u1ea5p c\xe1c quy\u1ec1n m\xe0 user s\u1edf h\u1eefu, c\xf2n vi\u1ec7c t\u1eeb c\xe1c quy\u1ec1n \u0111\xf3, ph\xe2n t\xedch v\xe0 cho ph\xe9p request \u0111\u01b0\u1ee3c \u0111i qua resources hay kh\xf4ng, c\xf2n c\u1ea7n m\u1ed9t th\xe0nh ph\u1ea7n n\u1eefa \u0111\u1ea3m nhi\u1ec7m."),(0,r.kt)("p",null,"Th\xe0nh ph\u1ea7n n\xe0y \u0111\u01b0\u1ee3c g\u1ecdi l\xe0 PEP (Policy Enforcement Point)."),(0,r.kt)("p",null,"Ch\xfang ta c\xf3 2 concept \u0111\u1ec3 th\u1ef1c hi\u1ec7n PEP (ho\u1eb7c nhi\u1ec1u h\u01a1n):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"D\xf9ng gateway l\xe0m PEP, nh\u1eefng request kh\xf4ng \u0111\u1ee7 role/policies s\u1ebd kh\xf4ng truy c\u1eadp \u0111\u01b0\u1ee3c resources c\u1ee7a c\xe1c service.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u01afu \u0111i\u1ec3m: implement m\u1ed9t l\u1ea7n, qu\u1ea3n l\xfd t\u1eadp trung, service kh\xf4ng c\u1ea7n quan t\xe2m nhi\u1ec1u \u0111\u1ebfn quy\u1ec1n c\u1ee7a user."),(0,r.kt)("li",{parentName:"ul"},"Nh\u01b0\u1ee3c \u0111i\u1ec3m: c\u1ea7n t\xecm hi\u1ec3u v\xe0 th\u1eed nghi\u1ec7m \u0111\u1ec3 implement PEP theo c\xe1ch c\u1ee7a gateway (t\u1ea1i \u0111\xe2y l\xe0 vi\u1ebft plugins cho Kong)."))),(0,r.kt)("li",{parentName:"ul"},"D\xf9ng services l\xe0m PEP, services s\u1ebd t\u1ef1 quy\u1ebft \u0111\u1ecbnh xem user c\xf3 \u0111\u01b0\u1ee3c truy c\u1eadp t\xe0i nguy\xean kh\xf4ng. Tuy",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u01afu \u0111i\u1ec3m: d\u1ec5 implement h\u01a1n, khi m\xe0 c\xe1c service \u0111\u1ec1u c\xf3 th\u1ec3 t\u1ef1 ph\xe2n t\xedch quy\u1ec1n user (th\xf4ng qua keycloak ho\u1eb7c userinfo), theo c\xe1ch c\u1ee7a ri\xeang m\xecnh."),(0,r.kt)("li",{parentName:"ul"},"Nh\u01b0\u1ee3c \u0111i\u1ec3m: ph\xe2n t\xe1n logic, c\xe1c services c\xf3 th\u1ec3 vi\u1ebft b\u1eb1ng nhi\u1ec1u c\xf4ng ngh\u1ec7 kh\xe1c nhau, d\u1eabn \u0111\u1ebfn m\u1ea5t \u0111\u1ed3ng b\u1ed9 v\xe0 kho debug khi c\xf3 l\u1ed7i v\u1ec1 policies x\u1ea3y ra.")))),(0,r.kt)("h2",{id:"kong-customize-plugins"},"Kong customize plugins"),(0,r.kt)("p",null,"Hi\u1ec7n t\u1ea1i, Plugin ",(0,r.kt)("inlineCode",{parentName:"p"},"oidc")," c\u1ee7a Kong ch\u1ec9 h\u1ed7 tr\u1ee3 authentication qua keycloak. \u0110\u1ec3 authorization th\xec c\xf3 m\u1ed9t plugin kh\xe1c, \u0111\xf3 l\xe0 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/gbbirkisson/kong-plugin-jwt-keycloak"},"Kong JWT keycloak"),", concept l\xe0 ph\xe2n t\xedch ",(0,r.kt)("inlineCode",{parentName:"p"},"JWT token")," c\u1ee7a keycloak \u0111\u1ec3 x\xe1c \u0111\u1ecbnh resource v\xe0 quy\u1ec1n truy c\u1eadp."),(0,r.kt)("p",null,"\u0110\u1ec3 s\u1eed d\u1ee5ng tri\u1ec7t \u0111\u1ec3 \u0111\u01b0\u1ee3c s\u1ee9c m\u1ea1nh authorization c\u1ee7a keycloak, c\xf2n c\u1ea7n d\u1ef1ng m\u1ed9t customize plugins \u0111\u1ec3 k\u1ebft n\u1ed1i v\u1edbi keycloak, nh\u1eb1m th\u1ef1c hi\u1ec7n vi\u1ec7c n\xe0y (sau khi \u0111\xe3 nghi\xean c\u1ee9u xong v\u1ec1 keycloak authorization concept v\xe0 l\u1ef1a ch\u1ecdn concept th\xedch h\u1ee3p)."),(0,r.kt)("p",null,"Kong \u0111\u01b0\u1ee3c vi\u1ebft b\u1eb1ng lua, v\xec v\u1eady ch\xfang ta c\xf3 th\u1ec3 vi\u1ebft kong plugins b\u1eb1ng ng\xf4n ng\u1eef lua theo ",(0,r.kt)("a",{parentName:"p",href:"https://konghq.com/blog/custom-lua-plugin-kong-gateway/"},"h\u01b0\u1edbng d\u1eabn")),(0,r.kt)("p",null,"Ho\u1eb7c c\u0169ng c\xf3 th\u1ec3 vi\u1ebft plugin b\u1eb1ng ng\xf4n ng\u1eef kh\xe1c, nh\u01b0 python, nodejs,... Xem th\xeam t\xe0i li\u1ec7u ",(0,r.kt)("a",{parentName:"p",href:"https://docs.konghq.com/gateway-oss/2.5.x/external-plugins/"},"t\u1ea1i \u0111\xe2y")),(0,r.kt)("h2",{id:"c\xe1ch-t\u01b0\u01a1ng-t\xe1c-gi\u1eefa-c\xe1c-service"},"C\xe1ch t\u01b0\u01a1ng t\xe1c gi\u1eefa c\xe1c service"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"C\xf3 2 lo\u1ea1i giao ti\u1ebfp:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Synchronous: Giao ti\u1ebfp \u0111\u1ed3ng b\u1ed9, c\xe1c service giao ti\u1ebfp v\u1edbi nhau th\xf4ng qua http request (restful api), ho\u1eb7c gRPC, requester ph\u1ea3i ch\u1edd response tr\u1ea3 v\u1ec1 m\u1edbi c\xf3 th\u1ec3 execute tr\u01b0\u1edbc. Nh\u1eefng request lo\u1ea1i n\xe0y th\u01b0\u1eddng s\u1eed d\u1ee5ng cho request l\u1ea5y d\u1eef li\u1ec7u, ho\u1eb7c validation."),(0,r.kt)("li",{parentName:"ul"},"Asynchronous: B\u1ea5t \u0111\u1ed3ng b\u1ed9, requester kh\xf4ng c\u1ea7n ch\u1edd response tr\u1ea3 v\u1ec1 (kh\xe1 gi\u1ed1ng d\xf9ng event/listener ho\u1eb7c job trong laravel). Th\u01b0\u1eddng c\xe1c service s\u1ebd giao ti\u1ebfp v\u1edbi nhau th\xf4ng qua event queue, message broker, ho\u1eb7c pub/sub. \u0110\u1ec3 ph\xe2n t\xedch, quy\u1ebft \u0111\u1ecbnh s\u1eed d\u1ee5ng c\xf4ng ngh\u1ec7 n\xe0o th\xec h\xe3y xem ",(0,r.kt)("a",{parentName:"li",href:"https://cloudgeeks.net/tim-hieu-ve-cac-loai-message-queue-phan-biet-pub-sub-va-message-base/"},"b\xe0i vi\u1ebft n\xe0y"))))))}p.isMDXComponent=!0}}]);